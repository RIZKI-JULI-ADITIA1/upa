<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Iky & Upa ü§ç</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
*{box-sizing:border-box}
body{
 margin:0;height:100vh;overflow:hidden;
 font-family:'Segoe UI',system-ui,sans-serif;
 background:black;color:white;
}

/* ========== VIDEO BG ========== */
video.bg{
 position:fixed;inset:0;
 width:100%;height:100%;
 object-fit:cover;
 z-index:-2;
 filter:brightness(.85);
}

/* ========== OVERLAY ========== */
.overlay{
 position:fixed;inset:0;
 background:rgba(0,0,0,.55);
 z-index:-1;
 transition:1s;
}

/* ========== CENTER CARD ========== */
.wrapper{
 height:100vh;
 display:flex;
 justify-content:center;
 align-items:center;
 padding:16px;
}

.card{
 width:100%;
 max-width:360px;
 padding:26px 24px;
 border-radius:26px;
 background:linear-gradient(160deg,rgba(255,255,255,.18),rgba(255,255,255,.04));
 backdrop-filter:blur(20px);
 box-shadow:0 30px 80px rgba(0,0,0,.75);
 text-align:center;
 animation:fade .8s ease;
}

@keyframes fade{
 from{opacity:0;transform:scale(.92)}
 to{opacity:1;transform:scale(1)}
}

/* ========== ASTRONAUT ========== */
.astronaut{
 width:130px;
 margin:0 auto 14px;
 animation:float 6s ease-in-out infinite;
}

@keyframes float{
 0%,100%{transform:translateY(0)}
 50%{transform:translateY(-12px)}
}

/* ========== TEXT ========== */
#text{
 font-size:1.02rem;
 line-height:1.85;
 min-height:130px;
 margin-bottom:18px;
 white-space:pre-line;
}

/* ========== DOTS ========== */
#dots{
 display:flex;
 justify-content:center;
 gap:6px;
 margin-bottom:18px;
}
#dots span{
 width:7px;height:7px;border-radius:50%;
 background:rgba(255,255,255,.35)
}
#dots span.active{background:white}

/* ========== BUTTONS ========== */
button{
 padding:13px 30px;
 border-radius:999px;
 border:none;
 background:white;
 color:#1c2554;
 font-size:.95rem;
 font-weight:600;
 cursor:pointer;
 transition:.25s;
}
button:hover{transform:scale(1.05)}

.options{display:none;gap:12px;justify-content:center}
.options button{flex:1}

/* ========== PHOTO SLIDE (OUTSIDE CARD) ========== */
.photo-wrap{
 position:fixed;
 inset:0;
 z-index:5;
 pointer-events:none;
 display:none;
}

.photo{
 position:absolute;
 width:130px;
 border-radius:16px;
 overflow:hidden;
 box-shadow:0 18px 40px rgba(0,0,0,.6);
 opacity:0;
 transform:scale(.9) rotate(-2deg);
 filter:blur(6px);
 transition:all 1.5s ease;
 animation:polaroid 6s ease-in-out infinite;
}

@keyframes polaroid{
 0%,100%{transform:rotate(-2deg)}
 50%{transform:rotate(2deg)}
}

.photo.show{
 opacity:1;
 transform:scale(1) rotate(0deg);
 filter:blur(0);
}

.photo img{width:100%;display:block}
.photo span{
 position:absolute;
 bottom:0;left:0;right:0;
 padding:8px;
 font-size:.7rem;
 background:linear-gradient(to top,rgba(0,0,0,.75),transparent);
}

/* ========== HINT ========== */
.hint{font-size:.7rem;opacity:.6;margin-top:10px}
</style>
</head>

<body>

<video id="bgVideo" class="bg" autoplay muted loop></video>
<div class="overlay"></div>

<audio id="music" loop>
 <source src="music.mp3" type="audio/mpeg">
</audio>

<div class="photo-wrap" id="photoWrap"></div>

<div class="wrapper">
 <div class="card" id="card">
  <img id="astro" class="astronaut">
  <div id="text"></div>
  <div id="dots"></div>

  <button id="nextBtn">Lanjut</button>

  <div class="options" id="options">
   <button onclick="answer()">Aku juga ü§ç</button>
   <button id="btnTidak">Aku masih mikir‚Ä¶</button>
  </div>

  <div class="hint">Swipe kiri / kanan ‚ú®</div>
 </div>
</div>

<script>
/* ========== CONFIG ========== */
const NOMOR_IKY="62895387764779";

/* ========== SLIDES ========== */
const slides=[
 {video:"slide1.mp4",astro:"astro1.png",
  text:"Di semesta yang luas ini‚Ä¶\n\nAda satu hal kecil\nyang pelan-pelan bikin Iky berhenti."},
 {video:"slide2.mp4",astro:"astro2.png",
  text:"Upa‚Ä¶\n\nTanpa sadar,\nhari-hari Iky mulai penuh\nkarena kamu."},
 {video:"slide3.mp4",astro:"astro3.png",
  text:"Bukan karena kamu sempurna.\n\nTapi karena bersama kamu,\nIky ngerasa pulang."},
 {video:"slide4.mp4",astro:"astro4.png",
  text:"Aku takut kehilangan kamu.\n\nBukan karena aku lemah‚Ä¶\nTapi karena aku sayang sedalam ini."},
 {video:"slide1.mp4",astro:"astro5.png",
  text:"Kalau Iky boleh minta satu hal‚Ä¶\n\nTinggallah.\nDi semesta kecil bernama kita ü§ç"},
 {video:"slide2.mp4",photoSlide:true,
  photos:[
   {src:"photo1.jpeg",cap:"Senyum yang selalu bikin aku tenang ü§ç"},
   {src:"photo2.jpeg",cap:"Tanpa sadar, kamu rumah."},
   {src:"photo3.jpeg",cap:"Aku jatuh‚Ä¶ pelan-pelan, tapi dalam."}
 ]}
];

let index=0,typing=null,kaburCount=0;

const textEl=document.getElementById("text");
const astro=document.getElementById("astro");
const video=document.getElementById("bgVideo");
const nextBtn=document.getElementById("nextBtn");
const photoWrap=document.getElementById("photoWrap");
const dots=document.getElementById("dots");
const music=document.getElementById("music");
const btnTidak=document.getElementById("btnTidak");

/* ========== MUSIC ========== */
document.addEventListener("click",()=>{
 if(music.paused){music.volume=.25;music.play();}
},{once:true});

/* ========== TYPE ========== */
function typeText(t,s=45){
 clearInterval(typing);
 textEl.textContent="";
 let i=0;
 typing=setInterval(()=>{
  textEl.textContent+=t[i++]||"";
  if(i>t.length)clearInterval(typing);
 },s);
}

/* ========== DOTS ========== */
function renderDots(){
 dots.innerHTML="";
 slides.forEach((_,i)=>{
  const d=document.createElement("span");
  if(i===index)d.classList.add("active");
  dots.appendChild(d);
 });
}

/* ========== PHOTO SLIDE POSISI FIX ========== */
function showPhotoSlide(s){
 astro.style.display=textEl.style.display=dots.style.display=nextBtn.style.display="none";
 photoWrap.style.display="block";
 photoWrap.innerHTML="";

 const positions=[
  {top:"22%",left:"6%"},                    // kiri
  {top:"22%",right:"6%"},                   // kanan
  {bottom:"12%",left:"50%",transform:"translateX(-50%)"} // bawah
 ];

 s.photos.forEach((p,i)=>{
  const d=document.createElement("div");
  d.className="photo";
  d.innerHTML=`<img src="${p.src}"><span>${p.cap}</span>`;
  Object.assign(d.style,positions[i]);
  photoWrap.appendChild(d);
  setTimeout(()=>d.classList.add("show"),1200*i);
 });

 setTimeout(answer,8500);
}

/* ========== LOAD SLIDE ========== */
function loadSlide(){
 const s=slides[index];
 video.src=s.video;
 renderDots();

 if(s.photoSlide){showPhotoSlide(s);return;}

 astro.style.display=textEl.style.display=dots.style.display=nextBtn.style.display="block";
 astro.src=s.astro;
 typeText(s.text,index>=3?65:45);
}

/* ========== NEXT ========== */
nextBtn.onclick=()=>{index++;if(index<slides.length)loadSlide()};

/* ========== RUNAWAY ========== */
btnTidak.onmouseenter=btnTidak.ontouchstart=e=>{
 e.preventDefault();
 kaburCount++;
 btnTidak.style.left=(Math.random()*120-60)+"px";
 btnTidak.style.top=(Math.random()*120-60)+"px";
 if(kaburCount>=3)answer();
};

/* ========== ANSWER ========== */
function answer(){
 typeText("Makasih ya, Upa ü§ç\nKarena sudah memilih Iky.",60);
 setTimeout(()=>{
  location.href="https://wa.me/"+NOMOR_IKY;
 },4200);
}

/* ========== SWIPE ========== */
let startX=0;
document.getElementById("card").ontouchstart=e=>startX=e.touches[0].clientX;
document.getElementById("card").ontouchend=e=>{
 let d=e.changedTouches[0].clientX-startX;
 if(Math.abs(d)>70){index++;if(index<slides.length)loadSlide();}
};

/* ========== INIT ========== */
setTimeout(loadSlide,600);
</script>

</body>
</html>
