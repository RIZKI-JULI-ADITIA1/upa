<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Iky & Upa ü§ç</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
*{box-sizing:border-box}

body{
  margin:0;
  height:100vh;
  overflow:hidden;
  font-family:'Segoe UI',system-ui,sans-serif;
  background:black;
  color:white;
}

/* VIDEO */
video.bg{
  position:fixed;
  inset:0;
  width:100%;
  height:100%;
  object-fit:cover;
  z-index:-2;
  filter:brightness(.9);
}

/* OVERLAY */
.overlay{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.55);
  z-index:-1;
  transition:background 1s ease;
}

/* CENTER */
.wrapper{
  height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  padding:16px;
}

/* CARD */
.card{
  width:100%;
  max-width:360px;
  padding:26px 24px;
  border-radius:26px;
  background:linear-gradient(160deg,rgba(255,255,255,.18),rgba(255,255,255,.04));
  backdrop-filter:blur(20px);
  box-shadow:0 30px 80px rgba(0,0,0,.75);
  text-align:center;
  animation:fade .8s ease;
}

@keyframes fade{
  from{opacity:0;transform:scale(.92)}
  to{opacity:1;transform:scale(1)}
}

/* ASTRONAUT */
.astronaut{
  width:135px;
  margin:0 auto 16px;
  display:block;
  animation:float 6s ease-in-out infinite;
}

@keyframes float{
  0%,100%{transform:translateY(0)}
  50%{transform:translateY(-12px)}
}

/* TEXT */
#text{
  font-size:1.02rem;
  line-height:1.85;
  min-height:130px;
  margin-bottom:18px;
  white-space:pre-line;
}

/* DOTS */
#dots{
  display:flex;
  justify-content:center;
  gap:6px;
  margin-bottom:18px;
}
#dots span{
  width:7px;
  height:7px;
  border-radius:50%;
  background:rgba(255,255,255,.35);
}
#dots span.active{
  background:white;
}

/* BUTTON */
button{
  padding:13px 30px;
  border-radius:999px;
  border:none;
  background:white;
  color:#1c2554;
  font-size:.95rem;
  font-weight:600;
  cursor:pointer;
  transition:.25s ease;
}
button:hover{transform:scale(1.05)}

.options{
  display:none;
  gap:12px;
  justify-content:center;
  position:relative;
}
.options button{flex:1}

/* RUNAWAY */
.runaway{
  position:relative;
  transition:top .25s ease,left .25s ease;
}

/* HINT */
.hint{
  margin-top:12px;
  font-size:.7rem;
  opacity:.6;
}

/* SMALL SCREEN */
@media (max-height:680px){
  .astronaut{width:115px}
  #text{font-size:.95rem;min-height:110px}
}
</style>
</head>

<body>

<video id="bgVideo" class="bg" autoplay muted loop playsinline></video>
<div class="overlay" id="overlay"></div>

<audio id="music" loop>
  <source src="music.mp3" type="audio/mpeg">
</audio>

<div class="wrapper">
  <div class="card" id="card">
    <img id="astro" class="astronaut" src="">
    <div id="text"></div>

    <div id="dots"></div>

    <button id="nextBtn">Lanjut</button>

    <div class="options" id="options">
      <button onclick="answer(true)">Aku juga ü§ç</button>
      <button id="btnTidak">Aku masih mikir‚Ä¶</button>
    </div>

    <div class="hint">Swipe kiri / kanan di kartu ‚ú®</div>
  </div>
</div>

<script>
/* ================= CONFIG ================= */
const NOMOR_IKY = "62895387764779"; // pakai format internasional
/* ========================================= */

const slides=[
 {video:"slide1.mp4",astro:"astro1.png",
  text:"Di semesta yang luas ini‚Ä¶\n\nAda satu hal kecil\nyang pelan-pelan bikin Iky berhenti."},

 {video:"slide2.mp4",astro:"astro2.png",
  text:"Upa‚Ä¶\n\nTanpa sadar,\nhari-hari Iky mulai penuh\nkarena kamu."},

 {video:"slide3.mp4",astro:"astro3.png",
  text:"Bukan karena kamu sempurna.\n\nTapi karena bersama kamu,\nIky ngerasa pulang."},

 {video:"slide4.mp4",astro:"astro4.png",
  text:"Aku takut kehilangan kamu.\n\nBukan karena aku lemah‚Ä¶\nTapi karena aku sayang sedalam ini."},

 {video:"slide1.mp4",astro:"astro5.png",
  text:"Kalau Iky boleh minta satu hal‚Ä¶\n\nTinggallah.\nDi semesta kecil bernama kita ü§ç",
  end:true}
];

let index=0, typing=null, kaburCount=0;

const textEl=document.getElementById("text");
const videoEl=document.getElementById("bgVideo");
const astroEl=document.getElementById("astro");
const nextBtn=document.getElementById("nextBtn");
const options=document.getElementById("options");
const btnTidak=document.getElementById("btnTidak");
const music=document.getElementById("music");
const overlay=document.getElementById("overlay");
const card=document.getElementById("card");
const dotsEl=document.getElementById("dots");

/* MUSIC */
document.addEventListener("click",()=>{
 if(music.paused){
  music.volume=0.25;
  music.play();
 }
},{once:true});

/* TYPE */
function typeText(t,speed=45){
 clearInterval(typing);
 textEl.textContent="";
 let i=0;
 typing=setInterval(()=>{
  textEl.textContent+=t.charAt(i++);
  if(i>=t.length) clearInterval(typing);
 },speed);
}

/* DOTS */
function renderDots(){
 dotsEl.innerHTML="";
 slides.forEach((_,i)=>{
  const s=document.createElement("span");
  if(i===index) s.classList.add("active");
  dotsEl.appendChild(s);
 });
}

/* LOAD */
function loadSlide(){
 typeText(slides[index].text,index>=3?65:45);
 videoEl.src=slides[index].video;
 astroEl.src=slides[index].astro;
 renderDots();

 if(index>=3){
  overlay.style.background="rgba(0,0,0,.7)";
  card.style.transform="scale(.97)";
 }else{
  overlay.style.background="rgba(0,0,0,.55)";
  card.style.transform="scale(1)";
 }

 if(slides[index].end){
  nextBtn.style.display="none";
  options.style.display="flex";
  btnTidak.classList.add("runaway");
 }
}

/* NEXT */
nextBtn.onclick=()=>{
 index++;
 if(index<slides.length) loadSlide();
};

/* ANSWER */
function answer(){
 typeText("Makasih ya, Upa ü§ç\nKarena sudah memilih Iky.",60);
 setTimeout(()=>{
  window.location.href=
   "https://wa.me/"+NOMOR_IKY+
   "?text="+encodeURIComponent(
    "Iky‚Ä¶ aku juga ü§ç\nAku nangis bacanya.\nTerima kasih ya."
   );
 },4200);
}

/* RUNAWAY */
btnTidak.addEventListener("mouseenter",kabur);
btnTidak.addEventListener("touchstart",kabur);

function kabur(e){
 e.preventDefault();
 kaburCount++;
 btnTidak.style.left=(Math.random()*120-60)+"px";
 btnTidak.style.top=(Math.random()*120-60)+"px";
 if(kaburCount>=3){
  btnTidak.style.display="none";
  setTimeout(answer,1600);
 }
}

/* SWIPE */
let startX=0;
card.addEventListener("touchstart",e=>{
 startX=e.touches[0].clientX;
});
card.addEventListener("touchend",e=>{
 const diff=e.changedTouches[0].clientX-startX;
 if(Math.abs(diff)>70 && nextBtn.style.display!=="none"){
  index++;
  if(index<slides.length) loadSlide();
 }
});

/* INIT */
setTimeout(()=>{
 loadSlide();
},600);
</script>

</body>
</html>
